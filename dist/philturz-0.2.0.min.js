!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.philturz=t():e.philturz=t()}(window,(function(){return function(e){var t={};function l(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,l),n.l=!0,n.exports}return l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";function r(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}l.r(t),l.d(t,"init",(function(){return E}));var n={selectors:{},types:{single:"single",multiple:"multiple"},classes:{filter:{filter:"philturz-filter",item:{item:"philturz-filter-item",singleType:"philturz-filter-item-type-single",multipleType:"philturz-filter-item-type-multiple",label:"philturz-filter-item-label",control:"philturz-filter-item-control",controlLabel:"philturz-filter-item-control-label",controlInput:"philturz-filter-item-control-input"},form:"philturz-filter-form",reset:"philturz-filter-reset",resetButton:"philturz-filter-reset-button"},list:{list:"philturz-list",item:"philturz-list-item",itemEven:"philturz-list-item-even"}},attributePrefix:"data-philturz-",resetButtonText:"Reset filters",valueListDelimiter:"; ",emptyValue:"",emptyLabel:"",events:{change:"philturzChange",reset:"philturzReset"},eventsDetail:{filterItem:"philturzFilterItem",filterItemControl:"philturzFilterItemControl"}},i=[],s={change:{}},a={};function o(e,t){return e===t}function c(e,t){return-1!==e.indexOf(t)}function u(){var e=!1;Array.from(document.querySelectorAll(n.selectors.listItems+":not([hidden])")).forEach((function(t){e?t.classList.add(n.classes.list.itemEven):t.classList.remove(n.classes.list.itemEven),e=!e}))}function f(e){var t=!1;i.some((function(l){var r,i,s,a,u=n.attributePrefix+l.key,f=(r=e.attributes[u].value)===n.emptyValue?[]:r.split(n.valueListDelimiter);return 0!==f.length&&(i=f,s=l.value,a=function(e){return"string"==typeof e}()?o:c,!i.some((function(e){return a(s,e)}))&&(t=!0,!0))})),t?e.setAttribute("hidden",""):e.removeAttribute("hidden")}function d(){Array.from(document.querySelectorAll(n.selectors.listItems)).forEach(f),u()}function p(e,t){return{key:e,value:t}}function m(e,t){var l=!1,r=i.map((function(r){var n=r.value;r.key===e&&(l=!0,-1!==r.value.indexOf(t)||(n=n.concat(t)));return p(r.key,n)}));i=l?r:r.concat(p(e,[t]))}function v(e,t){i=i.map((function(l){var r=l.value;return l.key===e&&(r=r.filter((function(e){return e!==t}))),p(l.key,r)})).filter((function(t){return t.key!==e||t.value.length>0}))}function y(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=a[n.selectors.filterId],i=s.change[t];i||(i=s.change[t]=new CustomEvent(e,{detail:l})),r.dispatchEvent(i)}function h(e){return function(t){var l,s=t.target.value;if(s===n.emptyValue)i=function(e){return i.filter((function(t){return t.key!==e}))}(e);else{var a=i.some((function(t){return t.key===e}));i=a?function(e,t){return i.map((function(l){var r=l.key===e?t:l.value;return p(l.key,r)}))}(e,s):function(e,t){var l=p(e,t);return i.concat(l)}(e,s)}d();var o=(r(l={},n.eventsDetail.filterItem,t.target.parentElement.parentElement),r(l,n.eventsDetail.filterItemControl,t.target),l);y(n.events.change,e,o)}}function b(e){i=[],d(),y(n.events.reset,"reset")}function g(e){e.preventDefault()}function E(e,t,l,i){n.selectors.filterId="#".concat(e),n.selectors.filterItem=".".concat(t),n.selectors.filterItems="".concat(n.selectors.filterId," ").concat(n.selectors.filterItem),n.selectors.listId="#".concat(l),n.selectors.listItem=".".concat(i),n.selectors.listItems="".concat(n.selectors.listId," ").concat(n.selectors.listItem);var s=document.getElementById(l),o=Array.from(document.querySelectorAll(n.selectors.listItems)),c=document.getElementById(e),f=Array.from(document.querySelectorAll(n.selectors.filterItems)),p=c.parentNode;a[n.selectors.filterId]=c,s.classList.add(n.classes.list.list),c.classList.add(n.classes.filter.filter),o.forEach((function(e){e.classList.add(n.classes.list.item)})),f.forEach((function(e){var t={key:e.dataset.philturzKey,type:e.dataset.philturzType,label:e.dataset.philturzLabel,emptyLabel:e.dataset.philturzEmptyLabel||n.emptyLabel,values:e.dataset.philturzValues.split(n.valueListDelimiter)},l=document.createElement("label"),i=document.createTextNode(t.label);switch(l.classList.add(n.classes.filter.item.label),e.classList.add(n.classes.filter.item.item),l.appendChild(i),e.appendChild(l),t.type){case n.types.single:var s=document.createElement("div"),a=document.createElement("select"),o=document.createElement("option");e.classList.add(n.classes.filter.item.singleType),s.classList.add(n.classes.filter.item.control),a.classList.add(n.classes.filter.item.controlInput),a.autocomplete="off",o.value=n.emptyValue,o.text=t.emptyLabel,a.appendChild(o),t.values.forEach((function(e){var t=document.createElement("option");t.value=e,t.text=e,a.appendChild(t)})),s.appendChild(a),e.appendChild(s),a.addEventListener("change",h(t.key));break;case n.types.multiple:t.values.forEach((function(l){var i,s=document.createElement("div"),a=document.createElement("label"),o=document.createTextNode(l),c=document.createElement("input");e.classList.add(n.classes.filter.item.multipleType),s.classList.add(n.classes.filter.item.control),a.classList.add(n.classes.filter.item.controlLabel),c.classList.add(n.classes.filter.item.controlInput),c.type="checkbox",c.autocomplete="off",c.value=l,a.appendChild(c),a.appendChild(o),s.appendChild(a),e.appendChild(s),c.addEventListener("change",(i=t.key,function(e){var t;(e.target.checked?m:v)(i,e.target.value),d();var l=(r(t={},n.eventsDetail.filterItem,e.target.parentElement.parentElement.parentElement),r(t,n.eventsDetail.filterItemControl,e.target),t);y(n.events.change,i,l)}))}))}}));var E=document.createElement("form"),L=document.createElement("div"),I=document.createElement("input");E.addEventListener("submit",g),E.addEventListener("reset",b),E.classList.add(n.classes.filter.form),L.classList.add(n.classes.filter.reset),I.type="reset",I.value=n.resetButtonText,I.classList.add(n.classes.filter.resetButton),L.appendChild(I),c.appendChild(L),p.insertBefore(E,c),E.appendChild(c),u()}}])}));