!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.philturz=t():e.philturz=t()}(window,(function(){return function(e){var t={};function l(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,l),i.l=!0,i.exports}return l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(r,i,function(t){return e[t]}.bind(null,i));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";l.r(t),l.d(t,"init",(function(){return v}));var r={selectors:{},types:{single:"single",multiple:"multiple"},classes:{filter:{filter:"philturz-filter",item:{item:"philturz-filter-item",singleType:"philturz-filter-item-type-single",multipleType:"philturz-filter-item-type-multiple",label:"philturz-filter-item-label",control:"philturz-filter-item-control",controlLabel:"philturz-filter-item-control-label",controlInput:"philturz-filter-item-control-input"},form:"philturz-filter-form",reset:"philturz-filter-reset",resetButton:"philturz-filter-reset-button"},list:{list:"philturz-list",item:"philturz-list-item",itemEven:"philturz-list-item-even"}},attributePrefix:"data-philturz-",resetButtonText:"Reset filters",valueListDelimiter:"; ",emptyValue:"",emptyLabel:""},i=[];function n(e,t){return e===t}function s(e,t){return-1!==e.indexOf(t)}function a(){var e=!1;Array.from(document.querySelectorAll(r.selectors.listItems+":not([hidden])")).forEach((function(t){e?t.classList.add(r.classes.list.itemEven):t.classList.remove(r.classes.list.itemEven),e=!e}))}function o(e){var t=!1;i.some((function(l){var i,a,o,c,u=r.attributePrefix+l.key,d=(i=e.attributes[u].value)===r.emptyValue?[]:i.split(r.valueListDelimiter);return 0!==d.length&&(a=d,o=l.value,c=function(e){return"string"==typeof e}()?n:s,!a.some((function(e){return c(o,e)}))&&(t=!0,!0))})),t?e.setAttribute("hidden",""):e.removeAttribute("hidden")}function c(){Array.from(document.querySelectorAll(r.selectors.listItems)).forEach(o),a()}function u(e,t){return{key:e,value:t}}function d(e,t){var l=!1,r=i.map((function(r){var i=r.value;r.key===e&&(l=!0,-1!==r.value.indexOf(t)||(i=i.concat(t)));return u(r.key,i)}));i=l?r:r.concat(u(e,[t]))}function f(e,t){i=i.map((function(l){var r=l.value;return l.key===e&&(r=r.filter((function(e){return e!==t}))),u(l.key,r)})).filter((function(t){return t.key!==e||t.value.length>0}))}function p(e){return function(t){var l=t.target.value;if(l===r.emptyValue)i=function(e){return i.filter((function(t){return t.key!==e}))}(e);else{var n=i.some((function(t){return t.key===e}));i=n?function(e,t){return i.map((function(l){var r=l.key===e?t:l.value;return u(l.key,r)}))}(e,l):function(e,t){var l=u(e,t);return i.concat(l)}(e,l)}c()}}function m(){i=[],c()}function y(e){e.preventDefault()}function v(e,t,l,i){r.selectors.filterId="#".concat(e),r.selectors.filterItem=".".concat(t),r.selectors.filterItems="".concat(r.selectors.filterId," ").concat(r.selectors.filterItem),r.selectors.listId="#".concat(l),r.selectors.listItem=".".concat(i),r.selectors.listItems="".concat(r.selectors.listId," ").concat(r.selectors.listItem);var n=document.querySelector(r.selectors.listId),s=Array.from(document.querySelectorAll(r.selectors.listItems)),o=document.querySelector(r.selectors.filterId),u=Array.from(document.querySelectorAll(r.selectors.filterItems)),v=o.parentNode;n.classList.add(r.classes.list.list),o.classList.add(r.classes.filter.filter),s.forEach((function(e){e.classList.add(r.classes.list.item)})),u.forEach((function(e){var t={key:e.dataset.philturzKey,type:e.dataset.philturzType,label:e.dataset.philturzLabel,emptyLabel:e.dataset.philturzEmptyLabel||r.emptyLabel,values:e.dataset.philturzValues.split(r.valueListDelimiter)},l=document.createElement("label"),i=document.createTextNode(t.label);switch(l.classList.add(r.classes.filter.item.label),e.classList.add(r.classes.filter.item.item),l.appendChild(i),e.appendChild(l),t.type){case r.types.single:var n=document.createElement("div"),s=document.createElement("select"),a=document.createElement("option");e.classList.add(r.classes.filter.item.singleType),n.classList.add(r.classes.filter.item.control),s.classList.add(r.classes.filter.item.controlInput),s.autocomplete="off",a.value=r.emptyValue,a.text=t.emptyLabel,s.appendChild(a),t.values.forEach((function(e){var t=document.createElement("option");t.value=e,t.text=e,s.appendChild(t)})),n.appendChild(s),e.appendChild(n),s.addEventListener("change",p(t.key));break;case r.types.multiple:t.values.forEach((function(l){var i,n=document.createElement("div"),s=document.createElement("label"),a=document.createTextNode(l),o=document.createElement("input");e.classList.add(r.classes.filter.item.multipleType),n.classList.add(r.classes.filter.item.control),s.classList.add(r.classes.filter.item.controlLabel),o.classList.add(r.classes.filter.item.controlInput),o.type="checkbox",o.autocomplete="off",o.value=l,s.appendChild(o),s.appendChild(a),n.appendChild(s),e.appendChild(n),o.addEventListener("change",(i=t.key,function(e){(e.target.checked?d:f)(i,e.target.value),c()}))}))}}));var h=document.createElement("form"),b=document.createElement("div"),L=document.createElement("input");h.addEventListener("submit",y),h.addEventListener("reset",m),h.classList.add(r.classes.filter.form),b.classList.add(r.classes.filter.reset),L.type="reset",L.value=r.resetButtonText,L.classList.add(r.classes.filter.resetButton),b.appendChild(L),o.appendChild(b),v.insertBefore(h,o),h.appendChild(o),a()}}])}));