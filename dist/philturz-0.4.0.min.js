!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.philturz=t():e.philturz=t()}(window,(function(){return function(e){var t={};function l(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,l),n.l=!0,n.exports}return l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";function r(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}l.r(t),l.d(t,"init",(function(){return E}));var n={selectors:{},types:{single:"single",multiple:"multiple"},classes:{filter:{filter:"philturz-filter",item:{item:"philturz-filter-item",singleType:"philturz-filter-item-type-single",multipleType:"philturz-filter-item-type-multiple",label:"philturz-filter-item-label",control:"philturz-filter-item-control",controlLabel:"philturz-filter-item-control-label",controlInput:"philturz-filter-item-control-input"},form:"philturz-filter-form",reset:"philturz-filter-reset",resetButton:"philturz-filter-reset-button"},list:{list:"philturz-list",item:"philturz-list-item",itemEven:"philturz-list-item-even"}},attributePrefix:"data-philturz-",resetButtonText:"Reset filters",valueListDelimiter:"; ",emptyValue:"",emptyLabel:"",events:{change:"philturzChange",reset:"philturzReset"},eventsDetail:{filterItem:"philturzFilterItem"}},i=[],s={};function a(e,t){return e===t}function c(e,t){return-1!==e.indexOf(t)}function o(){var e=!1;Array.from(document.querySelectorAll(n.selectors.listItems+":not([hidden])")).forEach((function(t){e?t.classList.add(n.classes.list.itemEven):t.classList.remove(n.classes.list.itemEven),e=!e}))}function u(e){var t=!1;i.some((function(l){var r,i,s,o,u=n.attributePrefix+l.key,d=(r=e.attributes[u].value)===n.emptyValue?[]:r.split(n.valueListDelimiter);return 0!==d.length&&(i=d,s=l.value,o=function(e){return"string"==typeof e}()?a:c,!i.some((function(e){return o(s,e)}))&&(t=!0,!0))})),t?e.setAttribute("hidden",""):e.removeAttribute("hidden")}function d(){Array.from(document.querySelectorAll(n.selectors.listItems)).forEach(u),o()}function f(e,t){return{key:e,value:t}}function p(e,t){var l=!1,r=i.map((function(r){var n=r.value;r.key===e&&(l=!0,-1!==r.value.indexOf(t)||(n=n.concat(t)));return f(r.key,n)}));i=l?r:r.concat(f(e,[t]))}function m(e,t){i=i.map((function(l){var r=l.value;return l.key===e&&(r=r.filter((function(e){return e!==t}))),f(l.key,r)})).filter((function(t){return t.key!==e||t.value.length>0}))}function v(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new CustomEvent(t,{bubbles:!0,detail:l});e.dispatchEvent(r)}function y(e){return function(t){var l=t.target.value;if(l===n.emptyValue)i=function(e){return i.filter((function(t){return t.key!==e}))}(e);else{var s=i.some((function(t){return t.key===e}));i=s?function(e,t){return i.map((function(l){var r=l.key===e?t:l.value;return f(l.key,r)}))}(e,l):function(e,t){var l=f(e,t);return i.concat(l)}(e,l)}d();var a=r({},n.eventsDetail.filterItem,t.target.parentElement.parentElement);v(t.target,n.events.change,a)}}function h(e){i=[],d(),v(e.target,n.events.reset)}function b(e){e.preventDefault()}function E(e,t,l,i){n.selectors.filterId="#".concat(e),n.selectors.filterItem=".".concat(t),n.selectors.filterItems="".concat(n.selectors.filterId," ").concat(n.selectors.filterItem),n.selectors.listId="#".concat(l),n.selectors.listItem=".".concat(i),n.selectors.listItems="".concat(n.selectors.listId," ").concat(n.selectors.listItem);var a=document.getElementById(l),c=Array.from(document.querySelectorAll(n.selectors.listItems)),u=document.getElementById(e),f=Array.from(document.querySelectorAll(n.selectors.filterItems));u.parentNode;s[n.selectors.filterId]=u,a.classList.add(n.classes.list.list),u.classList.add(n.classes.filter.filter),c.forEach((function(e){e.classList.add(n.classes.list.item)})),f.forEach((function(e){var t={key:e.dataset.philturzKey,type:e.dataset.philturzType,label:e.dataset.philturzLabel,emptyLabel:e.dataset.philturzEmptyLabel||n.emptyLabel,values:e.dataset.philturzValues.split(n.valueListDelimiter)},l=document.createElement("label"),i=document.createTextNode(t.label);switch(l.classList.add(n.classes.filter.item.label),e.classList.add(n.classes.filter.item.item),l.appendChild(i),e.appendChild(l),t.type){case n.types.single:var s=document.createElement("div"),a=document.createElement("select"),c=document.createElement("option");e.classList.add(n.classes.filter.item.singleType),s.classList.add(n.classes.filter.item.control),a.classList.add(n.classes.filter.item.controlInput),a.autocomplete="off",c.value=n.emptyValue,c.text=t.emptyLabel,a.appendChild(c),t.values.forEach((function(e){var t=document.createElement("option");t.value=e,t.text=e,a.appendChild(t)})),s.appendChild(a),e.appendChild(s),a.addEventListener("change",y(t.key));break;case n.types.multiple:t.values.forEach((function(l){var i,s=document.createElement("div"),a=document.createElement("label"),c=document.createTextNode(l),o=document.createElement("input");e.classList.add(n.classes.filter.item.multipleType),s.classList.add(n.classes.filter.item.control),a.classList.add(n.classes.filter.item.controlLabel),o.classList.add(n.classes.filter.item.controlInput),o.type="checkbox",o.autocomplete="off",o.value=l,a.appendChild(o),a.appendChild(c),s.appendChild(a),e.appendChild(s),o.addEventListener("change",(i=t.key,function(e){(e.target.checked?p:m)(i,e.target.value),d();var t=r({},n.eventsDetail.filterItem,e.target.parentElement.parentElement.parentElement);v(e.target,n.events.change,t)}))}))}}));var E=document.createElement("form"),g=document.createElement("div"),L=document.createElement("input");E.addEventListener("submit",b),E.addEventListener("reset",h),E.classList.add(n.classes.filter.form),g.classList.add(n.classes.filter.reset),L.type="reset",L.value=n.resetButtonText,L.classList.add(n.classes.filter.resetButton),f.forEach((function(e){E.appendChild(e)})),g.appendChild(L),E.appendChild(g),u.appendChild(E),o()}}])}));